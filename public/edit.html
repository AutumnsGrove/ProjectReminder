<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ADHD-friendly reminders app - Create/Edit reminder">
    <title>Edit Reminder</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/edit.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <button class="btn-icon btn-back" id="backBtn" aria-label="Go back">
                <span class="icon">‚Üê</span>
            </button>
            <h1 class="page-title" id="pageTitle">New Reminder</h1>
            <button class="btn-icon" id="deleteBtn" aria-label="Delete" title="Delete" style="display: none;">
                <span class="icon">üóë</span>
            </button>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <form id="reminderForm" class="reminder-form">
                <!-- Hidden ID field for editing -->
                <input type="hidden" id="reminderId" name="id">

                <!-- Reminder Text -->
                <div class="form-group">
                    <label for="reminderText" class="form-label">What do you need to do?</label>
                    <textarea
                        id="reminderText"
                        name="text"
                        class="form-control"
                        rows="3"
                        placeholder="e.g., Call mom about Thanksgiving"
                        required
                        autofocus
                    ></textarea>
                </div>

                <!-- Priority -->
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <div class="priority-selector">
                        <label class="priority-option">
                            <input type="radio" name="priority" value="chill" checked>
                            <span class="priority-badge chill">üü¢ Chill</span>
                        </label>
                        <label class="priority-option">
                            <input type="radio" name="priority" value="important">
                            <span class="priority-badge important">üü° Important</span>
                        </label>
                        <label class="priority-option">
                            <input type="radio" name="priority" value="urgent">
                            <span class="priority-badge urgent">üî¥ Urgent</span>
                        </label>
                    </div>
                </div>

                <!-- Category -->
                <div class="form-group">
                    <label for="category" class="form-label">Category</label>
                    <select id="category" name="category" class="form-control">
                        <option value="">None</option>
                        <option value="Personal">Personal</option>
                        <option value="Work">Work</option>
                        <option value="Errands">Errands</option>
                        <option value="Home">Home</option>
                        <option value="Health">Health</option>
                        <option value="Calls">Calls</option>
                        <option value="Shopping">Shopping</option>
                        <option value="Projects">Projects</option>
                    </select>
                </div>

                <!-- Due Date -->
                <div class="form-group">
                    <label for="dueDate" class="form-label">Due Date</label>
                    <input
                        type="date"
                        id="dueDate"
                        name="due_date"
                        class="form-control"
                    >
                    <small class="form-hint">Leave empty for "anytime" tasks</small>
                </div>

                <!-- Due Time -->
                <div class="form-group">
                    <label for="dueTime" class="form-label">Due Time</label>
                    <input
                        type="time"
                        id="dueTime"
                        name="due_time"
                        class="form-control"
                    >
                    <small class="form-hint">Optional - for time-specific reminders</small>
                </div>

                <!-- Time Required -->
                <div class="form-group">
                    <label for="timeRequired" class="form-label">
                        <input
                            type="checkbox"
                            id="timeRequired"
                            name="time_required"
                        >
                        Time-sensitive task
                    </label>
                    <small class="form-hint">Check if this task must be done at a specific time</small>
                </div>

                <!-- Location (Simple text input for Phase 2) -->
                <div class="form-group">
                    <label for="location" class="form-label">Location</label>
                    <input
                        type="text"
                        id="location"
                        name="location_text"
                        class="form-control"
                        placeholder="e.g., Home Depot, Gym, Office"
                    >
                    <small class="form-hint">Location-based reminders (map picker coming in Phase 6)</small>
                </div>

                <!-- Notes - TODO: Phase 4+ -->
                <!-- <div class="form-group">
                    <label for="notes" class="form-label">Notes</label>
                    <textarea
                        id="notes"
                        name="notes"
                        class="form-control"
                        rows="2"
                        placeholder="Additional details..."
                    ></textarea>
                </div> -->

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveBtn">Save</button>
                </div>
            </form>
        </main>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/errors.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/api.js"></script>
    <script src="js/animations.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Initialize Edit view
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof App !== 'undefined' && App.initEditView) {
                App.initEditView();
            }
        });

        // Back button handler
        document.getElementById('backBtn')?.addEventListener('click', () => {
            window.history.back();
        });

        // Cancel button handler
        document.getElementById('cancelBtn')?.addEventListener('click', () => {
            window.history.back();
        });

        // Form submit handler
        document.getElementById('reminderForm')?.addEventListener('submit', (e) => {
            e.preventDefault();
            if (typeof App !== 'undefined' && App.handleReminderSubmit) {
                App.handleReminderSubmit(e);
            }
        });

        // Delete button handler
        document.getElementById('deleteBtn')?.addEventListener('click', () => {
            if (typeof App !== 'undefined' && App.handleReminderDelete) {
                App.handleReminderDelete();
            }
        });
    </script>
</body>
</html>
